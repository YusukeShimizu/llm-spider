---
title: Rust library
description: Use llm-spider as a library.
---

`llm-spider` is both a CLI and a Rust library.

## Dependency

This repository is not published to crates.io by default.
Use a path (or git) dependency.

```toml
[dependencies]
llm-spider = { path = "../llm-spider" }
```

## Environment

- `OPENAI_API_KEY` is required.
- Optional: `OPENAI_BASE_URL`, `LLM_SPIDER_OPENAI_*`.

## Example

```rust
use std::time::Duration;

use anyhow::Context as _;
use llm_spider::openai::OpenAiClient;
use llm_spider::spider::{compose_markdown, crawl, UserRequest};

fn main() -> anyhow::Result<()> {
    llm_spider::logging::init().context("init logging")?;

    let request = UserRequest {
        query: "example query".to_owned(),
        max_chars: 4000,
        min_sources: 3,
        search_limit: 10,
        max_pages: 20,
        max_depth: 1,
        max_elapsed: Duration::from_secs(30),
        max_child_candidates: 20,
        max_children_per_page: 3,
        allow_local: false,
    };

    let openai = OpenAiClient::from_env().context("init OpenAI client")?;
    let result = crawl(&request, &openai).context("crawl")?;
    let markdown = compose_markdown(&request, &result);
    println!("{markdown}");
    Ok(())
}
```
